
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>GTA Mobile</title>
<style>
body { margin:0; overflow:hidden; touch-action:none; }

#joystick {
    position:absolute;
    bottom:40px;
    left:40px;
    width:120px;
    height:120px;
    background:rgba(255,255,255,0.2);
    border-radius:50%;
}

#stick {
    width:60px;
    height:60px;
    background:rgba(255,255,255,0.6);
    border-radius:50%;
    position:absolute;
    left:30px;
    top:30px;
}

.btn {
    position:absolute;
    width:70px;
    height:70px;
    background:rgba(255,255,255,0.5);
    border-radius:15px;
    text-align:center;
    line-height:70px;
    font-size:30px;
}

#enter { bottom:40px; right:40px; }
#gas { bottom:120px; right:40px; }
#brake { bottom:200px; right:40px; }

</style>
</head>
<body>

<div id="joystick">
    <div id="stick"></div>
</div>

<div id="enter" class="btn">ğŸš—</div>
<div id="gas" class="btn">â›½</div>
<div id="brake" class="btn">ğŸ›‘</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>

// ===== Ğ¡Ğ¦Ğ•ĞĞ =====
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

scene.add(new THREE.AmbientLight(0xffffff,0.6));
const light = new THREE.DirectionalLight(0xffffff,1);
light.position.set(10,20,10);
scene.add(light);

// ===== Ğ—Ğ•ĞœĞ›Ğ¯ =====
const ground = new THREE.Mesh(
new THREE.PlaneGeometry(200,200),
new THREE.MeshStandardMaterial({color:0x2e8b57})
);
ground.rotation.x = -Math.PI/2;
scene.add(ground);

// ===== Ğ˜Ğ“Ğ ĞĞš =====
const player = new THREE.Mesh(
new THREE.BoxGeometry(1,2,1),
new THREE.MeshStandardMaterial({color:0x0000ff})
);
player.position.y = 1;
scene.add(player);

// ===== ĞœĞĞ¨Ğ˜ĞĞ =====
const car = new THREE.Mesh(
new THREE.BoxGeometry(2,1,4),
new THREE.MeshStandardMaterial({color:0xff0000})
);
car.position.set(5,0.5,0);
scene.add(car);

// ===== Ğ¡ĞĞ¡Ğ¢ĞĞ¯ĞĞ˜Ğ• =====
let inCar = false;
let moveX = 0;
let moveZ = 0;
let speed = 0;
let cameraAngle = 0;

// ===== Ğ”Ğ–ĞĞ™Ğ¡Ğ¢Ğ˜Ğš =====
const joystick = document.getElementById("joystick");
const stick = document.getElementById("stick");

joystick.addEventListener("touchmove",(e)=>{
    let rect = joystick.getBoundingClientRect();
    let x = e.touches[0].clientX - rect.left - 60;
    let y = e.touches[0].clientY - rect.top - 60;

    let max = 40;
    let dist = Math.sqrt(x*x + y*y);
    if(dist > max){
        x *= max/dist;
        y *= max/dist;
    }

    stick.style.left = (x+30)+"px";
    stick.style.top = (y+30)+"px";

    moveX = x/40;
    moveZ = y/40;
});

joystick.addEventListener("touchend",()=>{
    stick.style.left = "30px";
    stick.style.top = "30px";
    moveX = 0;
    moveZ = 0;
});

// ===== ĞšĞĞĞŸĞšĞ˜ =====
document.getElementById("enter").ontouchstart = ()=>{
    let dist = player.position.distanceTo(car.position);
    if(dist < 3) inCar = !inCar;
};

document.getElementById("gas").ontouchstart = ()=> speed = 0.3;
document.getElementById("gas").ontouchend = ()=> speed = 0;

document.getElementById("brake").ontouchstart = ()=> speed = -0.2;
document.getElementById("brake").ontouchend = ()=> speed = 0;

// ===== ĞŸĞĞ’ĞĞ ĞĞ¢ ĞšĞĞœĞ•Ğ Ğ« =====
renderer.domElement.addEventListener("touchmove",(e)=>{
    cameraAngle += e.touches[0].movementX * 0.0005 || 0.01;
});

// ===== ĞĞĞ˜ĞœĞĞ¦Ğ˜Ğ¯ =====
function animate(){
requestAnimationFrame(animate);

let target = inCar ? car : player;

if(!inCar){
    target.position.x += moveX * 0.1;
    target.position.z += moveZ * 0.1;
}else{
    target.position.x += Math.sin(cameraAngle) * speed;
    target.position.z += Math.cos(cameraAngle) * speed;
}

let camX = target.position.x + 10*Math.sin(cameraAngle);
let camZ = target.position.z + 10*Math.cos(cameraAngle);

camera.position.set(camX,5,camZ);
camera.lookAt(target.position);

renderer.render(scene,camera);
}

animate();
 </script>   
<!-- ĞœĞ¸Ğ½Ğ¸ĞºĞ°Ñ€Ñ‚Ğ° -->
<canvas id="minimap" width="150" height="150"
style="position:absolute;top:20px;right:20px;background:rgba(0,0,0,0.5);border-radius:10px;"></canvas>

<!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ -->
<div id="inventoryBtn" style="position:absolute;top:20px;left:20px;
width:60px;height:60px;background:rgba(255,255,255,0.6);
border-radius:15px;text-align:center;line-height:60px;font-size:25px;">
ğŸ’
</div>

<div id="weaponBtn" style="position:absolute;top:100px;left:20px;
width:60px;height:60px;background:rgba(255,255,255,0.6);
border-radius:15px;text-align:center;line-height:60px;font-size:25px;">
ğŸ”«
</div>

<!-- ĞœĞµĞ½Ñ Ğ¾Ñ€ÑƒĞ¶Ğ¸Ñ -->
<div id="weaponMenu" style="
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%);
background:rgba(0,0,0,0.8);
padding:20px;
border-radius:15px;
display:none;
color:white;
text-align:center;
">
<h3>Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ Ğ¾Ñ€ÑƒĞ¶Ğ¸Ğµ</h3>
<div class="weapon">ğŸ”« ĞŸĞ¸ÑÑ‚Ğ¾Ğ»ĞµÑ‚</div>
<div class="weapon">ğŸ”« Ğ”Ñ€Ğ¾Ğ±Ğ¾Ğ²Ğ¸Ğº</div>
<div class="weapon">ğŸ”« ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚</div>
<br>
<button onclick="closeWeaponMenu()">Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ</button>
</div>
</script>
</body>
</html>
