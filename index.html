<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mini GTA RP</title>
<style>
body {
    margin: 0;
    overflow: hidden;
    background: #111;
    font-family: Arial;
}
#ui {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    background: rgba(0,0,0,0.5);
    padding: 10px;
    border-radius: 10px;
}
canvas {
    display: block;
    background: #3e7f4f;
}
button { margin: 2px; }
</style>
</head>
<body>

<div id="ui">
    <div>Роль: <span id="role">Игрок</span></div>
    <button onclick="setRole('Игрок')">Игрок</button>
    <button onclick="setRole('Админ')">Админ</button>
    <button onclick="setRole('Модератор')">Модератор</button>
    <br><br>
    <button onclick="joinFaction('Полиция')">Полиция</button>
    <button onclick="joinFaction('Медики')">Медики</button>
    <button onclick="joinFaction('Правительство')">Правительство</button>
    <button onclick="joinFaction('Прокуратура')">Прокуратура</button>
    <div>Фракция: <span id="faction">Нет</span></div>
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const worldWidth = 2000;
const worldHeight = 1500;

let player = {
    x: 400,
    y: 300,
    size: 25,
    speed: 5,
    color: "cyan"
};

let bullets = [];
let keys = {};

let cars = [
    {x: 800, y: 600, w: 70, h: 35},
    {x: 1200, y: 400, w: 70, h: 35}
];

document.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
document.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

canvas.addEventListener("click", e => {
    const rect = canvas.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;

    bullets.push({
        x: player.x,
        y: player.y,
        dx: (mouseX - canvas.width/2) / 15,
        dy: (mouseY - canvas.height/2) / 15
    });
});

function setRole(role) {
    document.getElementById("role").innerText = role;
}

function joinFaction(faction) {
    document.getElementById("faction").innerText = faction;
}

function update() {

    if (keys["w"]) player.y -= player.speed;
    if (keys["s"]) player.y += player.speed;
    if (keys["a"]) player.x -= player.speed;
    if (keys["d"]) player.x += player.speed;

    player.x = Math.max(0, Math.min(worldWidth, player.x));
    player.y = Math.max(0, Math.min(worldHeight, player.y));

    bullets.forEach(b => {
        b.x += b.dx;
        b.y += b.dy;
    });
}

function draw() {

    ctx.clearRect(0,0,canvas.width,canvas.height);

    const cameraX = player.x - canvas.width/2;
    const cameraY = player.y - canvas.height/2;

    ctx.save();
    ctx.translate(-cameraX, -cameraY);

    // дорога
    ctx.fillStyle = "#444";
    ctx.fillRect(0,700,2000,120);

    // машины
    ctx.fillStyle = "red";
    cars.forEach(car => {
        ctx.fillRect(car.x, car.y, car.w, car.h);
    });

    // игрок
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.size, player.size);

    // пули
    ctx.fillStyle = "yellow";
    bullets.forEach(b => {
        ctx.fillRect(b.x, b.y,
