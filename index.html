76<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>GTA MiniRP</title>
<style>
body { margin: 0; overflow: hidden; }
</style>
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);

let renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Ð¡Ð²ÐµÑ‚
let light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(5, 10, 7);
scene.add(light);

// Ð—ÐµÐ¼Ð»Ñ
let ground = new THREE.Mesh(
    new THREE.PlaneGeometry(200,200),
    new THREE.MeshStandardMaterial({color: 0x444444})
);
ground.rotation.x = -Math.PI/2;
scene.add(ground);

// Ð˜Ð³Ñ€Ð¾Ðº
let player = new THREE.Mesh(
    new THREE.BoxGeometry(1,2,1),
    new THREE.MeshStandardMaterial({color: 0x00ff00})
);
player.position.y = 1;
scene.add(player);

// ÐœÐ°ÑˆÐ¸Ð½Ð°
let car = new THREE.Mesh(
    new THREE.BoxGeometry(3,1.5,2),
    new THREE.MeshStandardMaterial({color: 0xff0000})
);
car.position.set(5,0.75,0);
scene.add(car);

let inCar = false;

camera.position.set(0,5,10);

document.addEventListener("keydown", (e)=>{
    if(!inCar){
        if(e.key=="w") player.position.z -=0.3;
        if(e.key=="s") player.position.z +=0.3;
        if(e.key=="a") player.position.x -=0.3;
        if(e.key=="d") player.position.x +=0.3;
    }else{
        if(e.key=="w") car.position.z -=0.4;
        if(e.key=="s") car.position.z +=0.4;
        if(e.key=="a") car.position.x -=0.4;
        if(e.key=="d") car.position.x +=0.4;
    }
});
let moveX = 0;
let moveZ = 0;

let joystick = document.getElementById("joystick");

joystick.addEventListener("touchmove", function(e){
    let touch = e.touches[0];
    let rect = joystick.getBoundingClientRect();

    let x = touch.clientX - rect.left - 50;
    let y = touch.clientY - rect.top - 50;

    moveX = x / 50;
    moveZ = y / 50;
});

joystick.addEventListener("touchend", function(){
    moveX = 0;
    moveZ = 0;
});

document.getElementById("enterCar").onclick = function(){
    let dist = player.position.distanceTo(car.position);

    if(dist < 3){
        inCar = !inCar;
    }
};
function animate(){
    requestAnimationFrame(animate);

    if(inCar){
        camera.position.lerp(
            new THREE.Vector3(car.position.x, car.position.y+5, car.position.z+10),
            0.1
        );
        camera.lookAt(car.position);
    }else{
        camera.position.lerp(
            new THREE.Vector3(player.position.x, player.position.y+5, player.position.z+10),
            0.1
        );
        camera.lookAt(player.position);
    }
if(!inCar){
    player.position.x += moveX * 0.1;
    player.position.z += moveZ * 0.1;
}else{
    car.position.x += moveX * 0.15;
    car.position.z += moveZ * 0.15;
        }
    renderer.render(scene, camera);
}

animate();
</script>

</body>
 <body>

<!-- Ð”Ð¶Ð¾Ð¹ÑÑ‚Ð¸Ðº -->
<div id="joystick" style="
position:absolute;
bottom:40px;
left:40px;
width:100px;
height:100px;
background:rgba(255,255,255,0.2);
border-radius:50%;
touch-action:none;">
</div>

<button id="enterCar" style="
position:absolute;
bottom:40px;
right:40px;
padding:15px;
font-size:18px;">
ðŸš—
</button>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
// Ñ‚Ð²Ð¾Ð¹ ÐºÐ¾Ð´ Ð¸Ð³Ñ€Ñ‹
</script>

 </body>   
</html>
