‚Å∑—Ä
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>GTA Mobile</title>
<style>
body { margin:0; overflow:hidden; touch-action:none; }

#joystick {
    position:absolute;
    bottom:40px;
    left:40px;
    width:120px;
    height:120px;
    background:rgba(255,255,255,0.2);
    border-radius:50%;
}

#stick {
    width:60px;
    height:60px;
    background:rgba(255,255,255,0.6);
    border-radius:50%;
    position:absolute;
    left:30px;
    top:30px;
}

.btn {
    position:absolute;
    width:70px;
    height:70px;
    background:rgba(255,255,255,0.5);
    border-radius:15px;
    text-align:center;
    line-height:70px;
    font-size:30px;
}

#enter { bottom:40px; right:40px; }
#gas { bottom:120px; right:40px; }
#brake { bottom:200px; right:40px; }

</style>
</head>
<body>

<div id="joystick">
    <div id="stick"></div>
</div>

<div id="enter" class="btn">üöó</div>
<div id="gas" class="btn">‚õΩ</div>
<div id="brake" class="btn">üõë</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>

function animate(){
requestAnimationFrame(animate);

let target = inCar ? car : player;

if(!inCar){
    target.position.x += moveX * 0.1;
    target.position.z += moveZ * 0.1;
}else{
    target.position.x += Math.sin(cameraAngle) * speed;
    target.position.z += Math.cos(cameraAngle) * speed;
}
updateMinimap();
let camX = target.position.x + 10*Math.sin(cameraAngle);
let camZ = target.position.z + 10*Math.cos(cameraAngle);

camera.position.set(camX,5,camZ);
camera.lookAt(target.position);

renderer.render(scene,camera);
}
// ===== –ú–ï–ù–Æ –û–†–£–ñ–ò–Ø ====
    
animate();
 </script>   
<!-- –ú–∏–Ω–∏–∫–∞—Ä—Ç–∞ -->
<canvas id="minimap" width="150" height="150"
style="position:absolute;top:20px;right:20px;background:rgba(0,0,0,0.5);border-radius:10px;"></canvas>

<!-- –ö–Ω–æ–ø–∫–∏ -->
<div id="inventoryBtn" style="position:absolute;top:20px;left:20px;
width:60px;height:60px;background:rgba(255,255,255,0.6);
border-radius:15px;text-align:center;line-height:60px;font-size:25px;">
üéí
</div>

<div id="weaponBtn" style="position:absolute;top:100px;left:20px;
width:60px;height:60px;background:rgba(255,255,255,0.6);
border-radius:15px;text-align:center;line-height:60px;font-size:25px;">
üî´
</div>

<!-- –ú–µ–Ω—é –æ—Ä—É–∂–∏—è -->
<div id="weaponMenu" style="
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%);
background:rgba(0,0,0,0.8);
padding:20px;
border-radius:15px;
display:none;
color:white;
text-align:center;
">
<h3>–í—ã–±–µ—Ä–∏ –æ—Ä—É–∂–∏–µ</h3>
<div class="weapon">üî´ –ü–∏—Å—Ç–æ–ª–µ—Ç</div>
<div class="weapon">üî´ –î—Ä–æ–±–æ–≤–∏–∫</div>
<div class="weapon">üî´ –ê–≤—Ç–æ–º–∞—Ç</div>
<br>
<button onclick="closeWeaponMenu()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>
<script>

// ===== –°–¶–ï–ù–ê =====
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

scene.add(new THREE.AmbientLight(0xffffff,0.6));
const light = new THREE.DirectionalLight(0xffffff,1);
light.position.set(10,20,10);
scene.add(light);

// ===== –ó–ï–ú–õ–Ø =====
const ground = new THREE.Mesh(
new THREE.PlaneGeometry(200,200),
new THREE.MeshStandardMaterial({color:0x2e8b57})
);
ground.rotation.x = -Math.PI/2;
scene.add(ground);

// ===== –ò–ì–†–û–ö =====
const player = new THREE.Mesh(
new THREE.BoxGeometry(1,2,1),
new THREE.MeshStandardMaterial({color:0x0000ff})
);
player.position.y = 1;
scene.add(player);

// ===== –ú–ê–®–ò–ù–ê =====
const car = new THREE.Mesh(
new THREE.BoxGeometry(2,1,4),
new THREE.MeshStandardMaterial({color:0xff0000})
);
car.position.set(5,0.5,0);
scene.add(car);

// ===== –°–û–°–¢–û–Ø–ù–ò–ï =====
let inCar = false;
let moveX = 0;
let moveZ = 0;
let speed = 0;
let cameraAngle = 0;

// ===== –î–ñ–û–ô–°–¢–ò–ö =====
const joystick = document.getElementById("joystick");
const stick = document.getElementById("stick");

joystick.addEventListener("touchmove",(e)=>{
    let rect = joystick.getBoundingClientRect();
    let x = e.touches[0].clientX - rect.left - 60;
    let y = e.touches[0].clientY - rect.top - 60;

    let max = 40;
    let dist = Math.sqrt(x*x + y*y);
    if(dist > max){
        x *= max/dist;
        y *= max/dist;
    }

    stick.style.left = (x+30)+"px";
    stick.style.top = (y+30)+"px";

    moveX = x/40;
    moveZ = y/40;
});

joystick.addEventListener("touchend",()=>{
    stick.style.left = "30px";
    stick.style.top = "30px";
    moveX = 0;
    moveZ = 0;
});

// ===== –ö–ù–û–ü–ö–ò =====
document.getElementById("enter").ontouchstart = ()=>{
    let dist = player.position.distanceTo(car.position);
    if(dist < 3) inCar = !inCar;
};

document.getElementById("gas").ontouchstart = ()=> speed = 0.3;
document.getElementById("gas").ontouchend = ()=> speed = 0;

document.getElementById("brake").ontouchstart = ()=> speed = -0.2;
document.getElementById("brake").ontouchend = ()=> speed = 0;

// ===== –ü–û–í–û–†–û–¢ –ö–ê–ú–ï–†–´ =====
renderer.domElement.addEventListener("touchmove",(e)=>{
    cameraAngle += e.touches[0].movementX * 0.0005 || 0.01;
});


    // ====== –û–†–£–ñ–ò–ï ======
let currentWeapon = "–ù–µ—Ç";

document.getElementById("weaponBtn").onclick = ()=>{
    document.getElementById("weaponMenu").style.display = "block";
};

function closeWeaponMenu(){
    document.getElementById("weaponMenu").style.display = "none";
}

document.querySelectorAll(".weapon").forEach(w=>{
    w.onclick = ()=>{
        currentWeapon = w.innerText;
        alert("–í—ã–±—Ä–∞–Ω–æ: " + currentWeapon);
        closeWeaponMenu();
    };
});


// ====== –ò–ù–í–ï–ù–¢–ê–†–¨ ======
window.addEventListener("load", function(){

document.getElementById("weaponBtn").onclick = ()=>{
    document.getElementById("weaponMenu").style.display = "block";
};

document.getElementById("inventoryBtn").onclick = ()=>{
    alert("–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å:\n–û—Ä—É–∂–∏–µ: " + currentWeapon);
};

});
    alert("–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å:\n–û—Ä—É–∂–∏–µ: " + currentWeapon

// ====== –ú–ò–ù–ò–ö–ê–†–¢–ê ======
const minimap = document.getElementById("minimap");
const ctx = minimap.getContext("2d");

function updateMinimap(){
    ctx.clearRect(0,0,150,150);

    ctx.fillStyle = "green";
    ctx.fillRect(0,0,150,150);

    let target = inCar ? car : player;

    ctx.fillStyle = "blue";
    ctx.beginPath();
    ctx.arc(75,75,5,0,Math.PI*2);
    ctx.fill();
    }    
</body>
</html>
