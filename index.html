<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mini GTA RP Online</title>
<style>
body {
    margin: 0;
    overflow: hidden;
    background: #222;
    font-family: Arial;
}
#ui {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
}
canvas {
    background: #4a7a4a;
}
button {
    margin: 2px;
}
</style>
</head>
<body>

<div id="ui">
    <div>Роль: <span id="role">Игрок</span></div>
    <button onclick="setRole('Игрок')">Игрок</button>
    <button onclick="setRole('Админ')">Админ</button>
    <button onclick="setRole('Модератор')">Модератор</button>
    <br><br>
    <button onclick="joinFaction('Полиция')">Полиция</button>
    <button onclick="joinFaction('Медики')">Медики</button>
    <button onclick="joinFaction('Правительство')">Правительство</button>
    <button onclick="joinFaction('Прокуратура')">Прокуратура</button>
    <div>Фракция: <span id="faction">Нет</span></div>
</div>

<canvas id="game" width="1000" height="600"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let player = {
    x: 200,
    y: 200,
    size: 20,
    speed: 4,
    color: "blue"
};

let bullets = [];
let cars = [
    {x: 500, y: 300, width: 60, height: 30}
];

let keys = {};

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

document.addEventListener("click", e => {
    bullets.push({
        x: player.x,
        y: player.y,
        dx: (e.clientX - player.x) / 20,
        dy: (e.clientY - player.y) / 20
    });
});

function setRole(role) {
    document.getElementById("role").innerText = role;
}

function joinFaction(faction) {
    document.getElementById("faction").innerText = faction;
}

function update() {

    if (keys["w"]) player.y -= player.speed;
    if (keys["s"]) player.y += player.speed;
    if (keys["a"]) player.x -= player.speed;
    if (keys["d"]) player.x += player.speed;

    bullets.forEach(b => {
        b.x += b.dx;
        b.y += b.dy;
    });
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // дороги
    ctx.fillStyle = "#555";
    ctx.fillRect(0,250,1000,100);

    // машины
    ctx.fillStyle = "red";
    cars.forEach(car => {
        ctx.fillRect(car.x, car.y, car.width, car.height);
    });

    // игрок
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.size, player.size);

    // пули
    ctx.fillStyle = "yellow";
    bullets.forEach(b => {
        ctx.fillRect(b.x, b.y, 5, 5);
    });
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
